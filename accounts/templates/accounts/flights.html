{% extends 'base_main/baseDashboard.html' %}
{% load static %}


{% block content %}
<style>
    .card {
        border: 1px solid #d4d4d4;
        /* Borda cinza para o card */
        margin: 10px 0;
        /* Margem acima e abaixo do card */
        padding: 20px;
        /* Preenchimento interno do card */
        background-color: #ffffff;
        /* Fundo branco para o card */
        border-radius: 5px;
        /* Bordas arredondadas */
        box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        /* Sombra leve para o card */
    }

    .centered {
        text-align: center;
        vertical-align: middle;
    }
</style>

<div class="container-fluid">
    <div class="card">
        <div class="card-corpo">
            <div class="titulo"><strong>Histórico de voos</strong> - Planos de voo que você gerou recentemente</div>
            <hr> <!-- Linha divisória -->
            <div class="caixa-conteudo">
                <!-- Conteúdo da caixa aqui -->
                <table class="table table-striped display" id="myTablet">
                    <thead class="leaddisplay-6">
                        <tr>
                            <th class="centered text-center">Voo</th>
                            <th class="centered text-center">Partida</th>
                            <th class="centered text-center">Chegada</th>
                            <th class="centered text-center">Aeronave</th>
                            <th class="centered text-center">Tempo</th>
                            <th class="centered text-center">Data</th>
                            <th class="centered text-center">Status</th>
                            <th class="centered text-center">View</th>
                            <th class="centered text-center">Edita</th>
                            <th class="centered text-center">Excluir</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for pireps_flights in pireps_flights %}
                        <tr>
                            <td class="text-center"><i class="fa-solid fa-plane-departure" style="color: rgb(11, 11, 82);"></i> {{pireps_flights.flight_icao}}{{pireps_flights.flight_number}}</td>
                            <td class="text-center"><i class="fa-solid fa-location-dot" style="color: rgb(11, 11, 82);"></i> {{pireps_flights.departure_airport}}</td>
                            <td class="text-center"><i class="fa-solid fa-location-dot" style="color: rgb(11, 11, 82);"></i> {{pireps_flights.arrival_airport}}</td>
                            <td class="text-center">{{pireps_flights.aircraft}}</td>
                            <td class="text-center">{{pireps_flights.flight_duration}}</td>
                            <td class="text-center">{{pireps_flights.registration_date|date:"d/m/y"}}</td>
                            <td class="text-center">
                                {% if pireps_flights.status == 'Em análise' %}
                                <span class="badge rounded-pill text-bg-warning">{{ pireps_flights.status }}</span>
                                {% elif pireps_flights.status == 'Aprovado' %}
                                <span class="badge rounded-pill text-bg-success">{{ pireps_flights.status }}</span>
                                {% else %}
                                <span class="badge rounded-pill text-bg-danger">{{ pireps_flights.status }}</span>
                                {% endif %}

                                {% if pireps_flights.event == 'S' %}
                                <span class="badge rounded-pill text-bg-info">Evento</span>
                                {% endif %}
                            </td>
                            {% if pireps_flights.status == 'Aprovado' %}
                            <td class="text-center">
                                <a class="btn btn-info" href="{% url 'briefing' pireps_flights.id %}" role="button"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-eye"></i>
                                </a>

                            </td>
                            <td class="text-center">
                                <a class="btn btn-warning disabled"
                                    href="{% url 'pirepsflighteditePage' pireps_flights.id %}" role="button"
                                    aria-disabled="true"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-pencil"></i>
                                </a>

                            </td>
                            <td class="text-center">
                                <a class="btn btn-danger disabled" href="#" role="button"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-trash"></i>
                                </a>
                            </td>
                            {% elif pireps_flights.status == 'Em análise' %}
                            <td class="text-center">
                                <a class="btn btn-info" href="{% url 'briefing' pireps_flights.id %}" role="button"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-eye"></i>
                                </a>

                            </td>
                            <td class="text-center">
                                <a class="btn btn-warning" href="{% url 'pirepsflighteditePage' pireps_flights.id %}"
                                    role="button"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-pencil"></i>
                                </a>

                            </td>
                            <td class="text-center">
                                <a class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#janelaModal"
                                    role="button"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-trash"></i>
                                </a>
                                <div id="janelaModal" class="modal fade" tabindex="-1" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class=" modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="confirmDeleteModalLabel">Confirmação de
                                                    Exclusão
                                                </h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <p>Você tem certeza de que deseja excluir este voo?</p>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-primary"
                                                    data-bs-dismiss="modal">Não</button>
                                                <form action="{% url 'pirepsflightdeletePage' pireps_flights.id %}"
                                                    method="post">
                                                    {% csrf_token %}
                                                    <button type="submit" class="btn btn-danger">Sim</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>
                            {% else %}
                            <td class="text-center">
                                <a class="btn btn-info disabled" href="{% url 'briefing' pireps_flights.id %}"
                                    role="button"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-eye"></i>
                                </a>

                            </td>
                            <td class="text-center">
                                <a class="btn btn-warning disabled"
                                    href="{% url 'pirepsflighteditePage' pireps_flights.id %}" role="button"
                                    aria-disabled="true"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-pencil"></i>
                                </a>

                            </td>
                            <td class="text-center">
                                <a class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#janelaModal"
                                    role="button"
                                    style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem;">
                                    <i class="fa-solid fa-trash"></i>
                                </a>
                                <div id="janelaModal" class="modal fade" tabindex="-1" aria-hidden="true">
                                    <div class="modal-dialog modal-dialog-centered">
                                        <div class="modal-content">
                                            <div class="modal-header">
                                                <h5 class="modal-title" id="confirmDeleteModalLabel">Confirmação de
                                                    Exclusão
                                                </h5>
                                                <button type="button" class="btn-close" data-bs-dismiss="modal"
                                                    aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                                <p>Você tem certeza de que deseja excluir este voo?</p>
                                            </div>
                                            <div class="modal-footer">
                                                <button type="button" class="btn btn-primary"
                                                    data-bs-dismiss="modal">Não</button>
                                                <form action="{% url 'pirepsflightdeletePage' pireps_flights.id %}"
                                                    method="post">
                                                    {% csrf_token %}
                                                    <button type="submit" class="btn btn-danger">Sim</button>
                                                </form>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </td>

                            {% endif %}
                        </tr>
                        {% endfor %}

                    </tbody>
                </table>
                <!-- Controles de paginação -->
                <ul class="pagination justify-content-center">
                    {% if pireps_flights.has_previous %}
                    <li class="page-item"><a class="page-link"
                            href="?page={{ pireps_flights.previous_page_number }}">Anterior</a></li>
                    {% endif %}
                    {% for i in pireps_flights.paginator.page_range %}
                    <li class="page-item {% if pireps_flights.number == i %}active{% endif %}"><a class="page-link"
                            href="?page={{ i }}">{{ i }}</a></li>
                    {% endfor %}
                    {% if pireps_flights.has_next %}
                    <li class="page-item"><a class="page-link"
                            href="?page={{ pireps_flights.next_page_number }}">Próximo</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </div>
</div>

{% endblock %}